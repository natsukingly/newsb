.post{class: "post post_#{post.id} post_draft"}
	.body
		.main
			.content.clearfix
				.user_block.clearfix{class: "user_#{post.user.id}"}
					.user_image
						=user_image_helper(post.user)
					.user_info
						=link_to post.user  do
							.give_me_short_ellipsis.light_navy.bold
								=post.user.name
						%p.user_shoulder_name.sm.grey
							=post.user.shoulder_name
							%i.fa.fa-clock-o
							#{time_ago_in_words_short(post.created_at)}
					.user_option.follow_switch.pull-right
						=render "/shared/follow_form_icon.html.haml", user: post.user
				%p.opinion
					=render_with_hashtags(post.content.gsub(/\n/, '<br />'))
				=render "post_drafts/edit", post: post
				-if post.article == nil
					%p.deleted_article	
						This article has been deleted.
				-else
					=link_to article_path(post.article_id), class: "post_article" do
						-if post.article.image
							.image{ style: "background-image: url(#{article_image_helper post.article.image.url });"}
						.article_info
							%h2.bold
								= universal_truncate(post.article.title, 120) do
									%span ...
							%p.xs.grey
								= post.article.source
							
		.draft_menu
			=link_to "EDIT", edit_post_draft_path(post.id), remote: true, class: "edit_draft_btn"
			.delete_btn
				DELETE

:javascript
	// post side menu open close

	$('.option_link').click(function () {
			var height = $(this).parents(".post").find('.opinion').css("height");
			$(this).parents(".post").find('.opinion').attr("data-height", height);
			// ボタンが押されたら、モーダルウィンドウを表示
			$(".ddm").hide();
			$(this).parents(".post").find('.post_ddm').css("display", "flex");
			
			return false;
	});
	
	$('body').click(function (event) {
	  if(!$(event.target).closest('.post_ddm').length && !$(event.target).is('.post_ddm')) {
		 $(".post_ddm").hide();
	  }     
	});

	$(".draft_menu .delete_draft_btn").click(function(){
	   $(this).parents(".post_ddm").find(".option_modal").fadeIn();
	   $(this).parents(".post_ddm").find(".delete").show();
	});
	$(".draft_menu .edit_draft_btn").click(function(){
	   $(this).parents(".post").find(".edit_draft_form").fadeIn();
	   $(this).parents(".post").find(".opinion").hide();
	   $(".draft_menu").hide();
	});	