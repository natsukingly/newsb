
-if post.content.nil? || post.content.empty? 
	.post{class: "post post_#{post.id} share wo_article"}
		.body
			.main
				.content
					.user_block{class: "user_#{post.user.id}"}
						.user_image
							=user_image_helper(post.user)
						.user_info_for_share
							%span
								=link_to post.user.name, post.user, class: "user_name bold"
								%i.fa.fa-share
								shared
								%span.time
									#{time_ago_in_words_short(post.created_at)}
						-if post.user != current_user
							.user_option.follow_switch
								=render "/shared/follow_form_icon.html.haml", user: post.user
								

-else				
	.post{class: "post post_#{post.id} wo_article", data: {post_id: "#{post.id}"}}
		.body
			.main
				.content
					.user_block{class: "user_#{post.user.id}"}
						.user_image
							=user_image_helper(post.user)
						.user_info
							=link_to post.user  do
								%span.star
									VIP
								%span
									=post.user.name
							%p.user_credential.sm.grey
								=post.user.credential
								%span.time
									#{time_ago_in_words_short(post.created_at)}
						.user_option.follow_switch
							=render "/shared/follow_form_icon.html.haml", user: post.user
					%p.opinion
						=render_with_hashtags(post.content.gsub(/\n/, '<br />'))
					=render "posts/edit", post: post
	
	
			.status.md
				.post_like_block
					=render '/likes/like_post', post: post
				-if current_user
					.comment_link.link_btn
						=render 'svg/chat_icon_circle'
						・
						%span.comment_count	
							= post.comments_count
				-else
					.comment_dummy_link.link_btn.login_signup_link
						=render 'svg/chat_icon_circle'
						・
						%span.comment_count	
							= post.comments_count		
				
				.option.pull-right
					%i.fa.fa-ellipsis-h.lg.option_link
					=render 'dropdown/post_option', post: post
		.comment_form
			=render '/comments/form', post: post 		
		.comment_index_wrapper
			-unless post.comments_count == 0
				.comment_index		
					- if post.comments_count > 1
						.view_link
							=render 'comments/view_more_link', post: post
					.comments
						=render 'comments/comment', comment: post.best_comment unless post.best_comment.nil?

:javascript
	// post side menu open close
	$('.option_link').click(function () {
			var height = $(this).parents(".post").find('.opinion').css("height");
			$(this).parents(".post").find('.opinion').attr("data-height", height);
			// ボタンが押されたら、モーダルウィンドウを表示
			$(".ddm").hide();
			$(this).parents(".post").find('.post_ddm').css("display", "flex");
			
			return false;
	});
	
	$('body').click(function (event) {
	  if(!$(event.target).closest('.post_ddm').length && !$(event.target).is('.post_ddm')) {
		 $(".post_ddm").hide();
	  }     
	});


